

<div class="hoja_carta_formato print">
    <div class="margen">
        <div class="row row-fluid">
            <div class="col-xs-8">
                <div class="row row-fluid">
                    <div class="col-xs-6 border-right text-center">
                        <img class="icon" style="width: 100px;" src="{{ asset('bundles/puertoudescommon/images/logo_icon.png') }}" alt="PuertoUDES">
                    </div>
                    <div id="empresa" class="col-xs-6">
                        <div class="enunciado">Empresa</div>
                        {% if formato.id is defined and formato.id is not empty and formato.numero is defined and formato.numero is not empty %}
                            {% for empresa in formato.empresas %}
                                {{ include('PuertoUDESFormatosBundle:Formato:_addEntidadCpicAjax.html.twig',{
                                        abreviacion:    formato.tipo.abreviacion|upper,
                                        numero:         formato.numero,
                                        entidad:        empresa,
                                        rol:            'empresa',
                                        fila:           loop.index0,
                                    }) 
                                }}
                            {% else %}
                                {% if formato.id is defined and formato.id is not empty and formato.numero is defined and formato.numero is not empty %}
                                    {{ render(controller('PuertoUDESUsuariosBundle:Entidad:addEntidadCpicAjax',{
                                            abreviacion:    formato.tipo.abreviacion,
                                            numero:         formato.numero,
                                            rol:            'empresa',
                                            fila:           0,
                                        }))
                                    }}
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                <div class="row row-fluid">
                    <div id="cliente" class="col-xs-12">
                        <div class="enunciado">Cliente</div>
                        {% if formato.id is defined and formato.id is not empty and formato.numero is defined and formato.numero is not empty %}
                            {% for cliente in formato.clientes %}
                                {{ include('PuertoUDESFormatosBundle:Formato:_addEntidadCpicAjax.html.twig',{
                                        abreviacion:    formato.tipo.abreviacion|upper,
                                        numero:         formato.numero,
                                        entidad:        cliente,
                                        rol:            'cliente',
                                        fila:           loop.index0,
                                    }) 
                                }}
                            {% else %}
                                {% if formato.id is defined and formato.id is not empty and formato.numero is defined and formato.numero is not empty %}
                                    {{ render(controller('PuertoUDESUsuariosBundle:Entidad:addEntidadCpicAjax',{
                                            abreviacion:    formato.tipo.abreviacion,
                                            numero:         formato.numero,
                                            rol:            'cliente',
                                            fila:           0,
                                        }))
                                    }}
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-xs-4 text-right">
                {% if formato.id is not defined or formato.id is empty %}
                    <div class="row">
                        <div>
                            <div class="text-right pull-right hidden-print">
                                {% include 'PuertoUDESCommonBundle:Plantilla:botones.html.twig' with {
                                    buttonset: 'horizontal',
                                    class: 'animate in hidden-print',
                                    botones  : [
                                        {
                                            'label' :   '<span class="glyphicon glyphicon-floppy-save"></span>',
                                            'type'  :   'primary',
                                            'class' :   'guardar formato-crear animate',
                                            'url'   :   url('formato_save_ajax',{tipo: formato.tipo.abreviacion|upper}),
                                        },
                                        {
                                            'class' :   'reset formato-crear animate',
                                            'type'  :   'warning',
                                            'label' :   '<span class="glyphicon glyphicon-refresh"></span>',
                                        },
                                    ],
                                    sizing: 'mediano',
                                } %}
                            </div>
                        </div>
                    </div>
                {% endif %}
                <h4>
                    Factura No. 
                    {% include 'PuertoUDESCommonBundle:Plantilla:_xeditable.html.twig' with {
                        id:             "entidad",
                        clase:          "formato-crear",
                        placement:      "bottom",
                        name:           "numero",
                        pk:             formato.id,
                        datos:          {},
                        type:           "text",
                        originalTitle:  "Factura No.",
                        entityName:     "entidad",
                        bundleName:     "common" ,
                        emptyText:      "No.",
                        placeholder:    "No.", 
                        required:       "NoVacio,Numeros",
                        valor:    formato.numero, 
                    } %}
                </h4>
                <h5>
                    <div>
                        {% set dataWith = {
                            id:             "formato_nombre",
                            clase:          "formato-crear",
                            placement:      "bottom",
                            name:           "id",
                            pk:             formato.id,
                            datos:          {tipo: formato.tipo.abreviacion|upper},
                            type:           "date",
                            originalTitle:  "Fecha",
                            entityName:     "formato",
                            bundleName:     "formatos" ,
                            emptyText:      "Fecha",
                            placeholder:    "Fecha", 
                            required:       "NoVacio,NumerosLetras",
                            valor:          formato.fechaCreado | date('d-M-y'),
                        } %}
                        <div>
                            {% include 'PuertoUDESCommonBundle:Plantilla:_xeditable.html.twig' with dataWith %}
                        </div>
                    </div>
                </h5>
            </div>
        </div>
        <div class="row row-fluid">
            <table class="table table-bordered table-striped table-hover row-padding">
                <tbody id="mercancias-gastos-formato">
                    <tr class="">
                        <th class="text-center title">
                            <div class="row">
                                <div>
                                    <div class="text-right pull-left fuera btns-action-left">
                                        {% include 'PuertoUDESCommonBundle:Plantilla:botones.html.twig' with {
                                            'buttonset': 'horizontal',
                                            'class': 'animate in',
                                            'botones'  : [
                                                {
                                                    'label' :   '<span class="glyphicon glyphicon-plus"></span>',
                                                    'type'  :   'success',
                                                    'class' :   'animate agregar mercancias-gastos-formato',
                                                    'url'   :   url('mercanciaGastoFormato_add_tipo_ajax',{
                                                                    numero: formato.numero is defined and formato.numero is not empty?formato.numero:-1,
                                                                    str_tipo: formato.tipo.abreviacion|upper,
                                                                }),
                                                },
                                            ],
                                            'sizing': 'pequeño',
                                        } %}
                                    </div>
                                </div>
                                <div class="text-center col-lg-12 col-md-12">
                                    Cantidad
                                </div>
                            </div>
                        </th>
                        <th class="text-center title">
                            Descripción
                        </th>
                        <th class="text-center title">
                            Precio Unitario
                        </th>
                        <th class="text-center title col-xs-1">
                            Precio Total
                        </th>
                    </tr>
                    {% for cm in formato.contenedoresMercancias %}
                        {{ include('PuertoUDESFormatosBundle:Formato:_addMercanciaGastoAjax.html.twig',{
                                fila:       loop.index0,
                                formato:    formato,
                                cm:         cm,
                            }) 
                        }}
                    {% else %}
                        {{ include('PuertoUDESFormatosBundle:Formato:_addMercanciaGastoAjax.html.twig',{
                                fila:       0,
                                formato:    formato,
                                cm:         null,
                            }) 
                        }}
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td rowspan="3" colspan="3" class="text-left">
                            {% include 'PuertoUDESCommonBundle:Plantilla:_xeditable.html.twig' with dataWith|merge({
                                placement:      "top",
                                pk:             formato.id,
                                datos:          {tipo: formato.tipo.abreviacion|upper},
                                entityName:     "formato",
                                bundleName:     "formatos" ,
                                id:             "formato_descripcion",
                                clase:          "formato-crear",
                                mode:           "inline",
                                name:           "descripcion",
                                type:           "textarea",
                                originalTitle:  "Descripción / Notas",
                                emptyText:      "Descripción / Notas",
                                placeholder:    "Descripción / Notas",
                                required:       "NoVacio,NumerosLetrasConectores",
                                valor:          formato.descripcion,
                            }) %}
                        </td>
                        <th>
                            Subtotal
                        </th>
                    </tr>
                    <tr>
                        <th>
                            IVA
                        </th>
                    </tr>
                    <tr>
                        <th>
                            Total
                        </th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>